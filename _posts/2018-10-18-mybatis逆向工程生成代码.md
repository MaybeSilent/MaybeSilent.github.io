---
layout: post
title: mybaits逆向生成
date: 2018-10-18
tag: 框架
---

# mybatis逆向工程生成代码

初步接触mybaits框架，再次记录使用过程和问题解决方法

- 配置maven

  ```xml
  <dependencies>
  
          <dependency>
              <groupId>mysql</groupId>
              <artifactId>mysql-connector-java</artifactId>
              <version>8.0.11</version>
          </dependency>
  
          <dependency>
              <groupId>junit</groupId>
              <artifactId>junit</artifactId>
              <version>4.11</version>
              <scope>test</scope>
          </dependency>
  
          <dependency>
              <groupId>org.mybatis</groupId>
              <artifactId>mybatis</artifactId>
              <version>3.3.0</version>
          </dependency>
  
      </dependencies>
  ```

- 配置完成maven所依赖的包之后，就能够使用相应的mybaits框架了，我们这里主要是用mybaits通过逆向工程将数据库中的代码转化成相应的pojo类和mapper配置文件，逆向生成代码的关键是要配置相应的xml配置文件，在此列出配置文件个人认为关键部分

  ```xml
  <jdbcConnection driverClass="com.mysql.cj.jdbc.Driver"
                  connectionURL="jdbc:mysql://127.0.0.1:3306/dbwork?useSSL=false"
                  userId="root"
                  password="root">
  </jdbcConnection>
  <!--数据库连接的信息：驱动类、连接地址、用户名、密码 -->
  
  <!-- targetProject:生成PO类的位置 -->
  <javaModelGenerator targetPackage="Pojo"
                      targetProject=".\src\main\java">
      <!-- enableSubPackages:是否让schema作为包的后缀 -->
      <property name="enableSubPackages" value="false" />
      <!-- 从数据库返回的值被清理前后的空格 -->
      <property name="trimStrings" value="true" />
  </javaModelGenerator>
  
  <!-- targetProject:mapper映射文件生成的位置 -->
  <!-- 置于相应的resources文件夹下 -->
  <sqlMapGenerator targetPackage="Mapper"
                   targetProject=".\src\main\resources">
      <!-- enableSubPackages:是否让schema作为包的后缀 -->
      <property name="enableSubPackages" value="false" />
  </sqlMapGenerator>
  
  <!-- targetPackage：mapper接口生成的位置 -->
  <!-- 该接口属于java接口文件，所以置于源代码文件夹java下，作为内容参与编译 -->
  <javaClientGenerator type="XMLMAPPER"
                       targetPackage="Mapper"
                       targetProject=".\src\main\java">
      <!-- enableSubPackages:是否让schema作为包的后缀 -->
      <property name="enableSubPackages" value="false" />
  </javaClientGenerator>
  
  <!-- java接口文件和xml mapper配置文件分开放置，其中xml配置文件置于resources文件夹下，接口类文件置于原文件夹代码下，可以使得程序整体目录结构清晰，不易出错 -->
  ```

- 其余问题

  - db.properties文件配置写法

    - properties文件是java用于静态存放配置的文件，格式较xml来说简单，其中jdbc配置过程中，值不需要加相应的双引号

    ```
    jdbc.driver = com.mysql.cj.jdbc.Driver
    jdbc.url = jdbc:mysql://127.0.0.1:3306/dbwork?useSSL=false
    jdbc.username = root
    jdbc.password = root
    ```

  - maven生成的工程目录结构问题
    - 利用maven进行编译运行等，会出现resources文件无法加载的问题，会出现source not found
    - 解决方法，将resources文件夹加入到mavaen的

  ```xml
  <resources>
      <resource>
      	<directory>src/main/resources</directory>
          <includes>
              <include>*.xml</include>
              <include>**/*.xml</include>
              <include>*.properties</include>
          </includes>
      </resource>
  </resources>
  ```


